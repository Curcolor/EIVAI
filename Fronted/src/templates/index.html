<!-- 
   * EIVAI - Sistema de Identificación de Herramientas Quirúrgicas con IA
   * Archivo: index.html - Página principal del sistema (dashboard de inicio)
   * Descripción: Dashboard principal con estadísticas, información del sistema y accesos rápidos
   * Funcionalidades:
   *   - Estadísticas en tiempo real del sistema
   *   - Panel de bienvenida con información del sistema
   *   - Estado de componentes del sistema
   *   - Accesos directos a funcionalidades principales
   *   - Diseño responsivo con tema quirúrgico personalizado
-->

{% extends "base.html" %}

{% block title %}Inicio{% endblock %}

<!-- CSS específico para la página de inicio -->
{% block head %}
<link rel="stylesheet" href="/static/css/index.css">
<link rel="stylesheet" href="/static/css/dashboard-integration.css">
{% endblock %}

{% block content %}
<!-- Sección de encabezado principal con estado del sistema -->
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <!-- Título principal del sistema -->
            <h1 class="h3 text-primary">
                <i class="fas fa-home me-2"></i>
                Bienvenido a EIVAI
            </h1>
            <!-- Indicador de estado del sistema con animación -->
            <div class="badge bg-success fs-6 system-active">
                <i class="fas fa-heartbeat me-1"></i>
                Sistema Activo
            </div>
        </div>
    </div>
</div>

<!-- Tarjetas de estadísticas principales del sistema -->
<div class="row mb-3" id="estadisticas-generales">
    <!-- Estadística: Total de herramientas registradas en la base de datos -->
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="card border-0 shadow-sm h-100 stats-card">
            <div class="card-body text-center">
                <div class="stats-icon">
                    <i class="fas fa-tools fa-lg"></i>
                </div>
                <h5 class="card-title text-muted mb-2">Herramientas Registradas</h5>
                <h3 class="text-primary fw-bold" id="total-tools">248</h3>
                <small class="text-muted">Base de datos actualizada</small>
            </div>
        </div>
    </div>
    
    <!-- Estadística: Identificaciones exitosas completadas -->
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="card border-0 shadow-sm h-100 stats-card">
            <div class="card-body text-center">
                <div class="stats-icon">
                    <i class="fas fa-check-circle fa-lg"></i>
                </div>
                <h5 class="card-title text-muted mb-2">Identificaciones Exitosas</h5>
                <h3 class="text-success fw-bold" id="successful-id">2,247</h3>
                <small class="text-muted">Últimos 30 días</small>
            </div>
        </div>
    </div>
    
    <!-- Estadística: Tiempo promedio de procesamiento de la IA -->
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="card border-0 shadow-sm h-100 stats-card">
            <div class="card-body text-center">
                <div class="stats-icon">
                    <i class="fas fa-clock fa-lg"></i>
                </div>
                <h5 class="card-title text-muted mb-2">Tiempo Promedio</h5>
                <h3 class="text-warning fw-bold" id="avg-time">18.3s</h3>
                <small class="text-muted">Procesamiento IA</small>
            </div>
        </div>
    </div>
    
    <!-- Estadística: Precisión del modelo de IA -->
    <div class="col-md-3 col-sm-6 mb-3">        
        <div class="card border-0 shadow-sm h-100 stats-card">
            <div class="card-body text-center">
                <div class="stats-icon">
                    <i class="fas fa-percentage fa-lg"></i>
                </div>
                <h5 class="card-title text-muted mb-2">Precisión</h5>
                <h3 class="text-info fw-bold" id="accuracy">96.7%</h3>
                <small class="text-muted">Modelo v2.1.0</small>
            </div>
        </div>    </div>
</div>

<!-- Estadísticas Generales del Dashboard -->
<div id="estadisticas-generales" class="row mb-4">
    <!-- El contenido de estadísticas se mantiene igual -->
</div>

<!-- Sección de bienvenida con información del sistema -->
<div class="row mb-3">
    <div class="col-12">
        <div class="card border-0 shadow-sm bg-gradient text-white welcome-section" style="background: linear-gradient(135deg, var(--azul-profundo), var(--verde-quirurgico)) !important;">
            <div class="card-body text-center py-3">
                <!-- Icono principal del sistema médico -->
                <i class="fas fa-user-md fa-2x mb-3"></i>
                <h2 class="mb-3">Sistema de Identificación de Herramientas Quirúrgicas</h2>
                <p class="lead mb-3">
                    Utiliza inteligencia artificial avanzada para identificar y clasificar herramientas quirúrgicas 
                    con precisión y eficiencia en tiempo real.
                </p>
                
                <!-- Características principales del sistema -->
                <div class="row text-center">
                    <!-- IA Avanzada -->
                    <div class="col-md-4 mb-2">
                        <i class="fas fa-brain fa-lg mb-2"></i>
                        <h6>IA Avanzada</h6>
                        <p class="mb-0 small">Modelos entrenados con miles de imágenes quirúrgicas</p>
                    </div>
                    <!-- Procesamiento en tiempo real -->
                    <div class="col-md-4 mb-2">
                        <i class="fas fa-clock fa-lg mb-2"></i>
                        <h6>Tiempo Real</h6>
                        <p class="mb-0 small">Identificación en menos de 3 segundos</p>
                    </div>
                    <!-- Confiabilidad del sistema -->
                    <div class="col-md-4 mb-2">
                        <i class="fas fa-shield-alt fa-lg mb-2"></i>
                        <h6>Confiable</h6>
                        <p class="mb-0 small">Precisión superior al 95%</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Panel principal de información del sistema -->
<div class="row">
    <!-- Panel izquierdo: Resumen de actividad -->
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-chart-line me-2"></i>
                    Resumen de Actividad
                </h5>
            </div>
            <div class="card-body">
                <div class="row">                <!-- Estadísticas del día actual -->
                    <div class="col-md-6">
                        <h6 class="text-muted mb-3">Estadísticas del Día</h6>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Identificaciones completadas:</span>
                            <strong id="daily-identifications">42</strong>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Tiempo promedio:</span>
                            <strong id="daily-avg-time">2.1s</strong>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Precisión promedio:</span>
                            <strong id="daily-accuracy">95.3%</strong>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Usuarios activos:</span>
                            <strong id="active-users">7</strong>
                        </div>
                    </div>
                    
                    <!-- Estado de componentes del sistema -->
                    <div class="col-md-6">
                        <h6 class="text-muted mb-3">Estado del Sistema</h6>
                        <!-- Servidor principal -->
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-success rounded-circle me-2" style="width: 10px; height: 10px;"></div>
                            <span>Servidor principal activo</span>
                        </div>
                        <!-- Base de datos -->
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-success rounded-circle me-2" style="width: 10px; height: 10px;"></div>
                            <span>Base de datos conectada</span>
                        </div>
                        <!-- Modelos de IA -->
                        <div class="d-flex align-items-center mb-2">
                            <div class="bg-success rounded-circle me-2" style="width: 10px; height: 10px;"></div>
                            <span>Modelos IA cargados</span>
                        </div>
                        <!-- Cache del sistema -->
                        <div class="d-flex align-items-center">
                            <div class="bg-warning rounded-circle me-2" style="width: 10px; height: 10px;"></div>
                            <span>Cache en optimización</span>
                        </div>
                    </div>
                </div>
                  <!-- Botón principal para acceder a la identificación -->
                <div class="row mt-3">
                    <div class="col-12">
                        <a href="/identificacion" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-camera me-2"></i>
                            Ir a Identificación de Herramientas
                        </a>
                    </div>
                </div>
                
                <!-- Botón de actualización manual -->
                <div class="row mt-2">
                    <div class="col-12">
                        <button id="refresh-dashboard" class="btn btn-outline-secondary btn-sm w-100">
                            <i class="fas fa-sync-alt me-2"></i>
                            Actualizar Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Panel derecho: Información lateral del sistema -->
    <div class="col-lg-4">
        <!-- Información técnica del sistema -->
        <div class="card border-0 shadow-sm mb-3">
            <div class="card-header bg-info text-white">
                <h6 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    Información del Sistema
                </h6>
            </div>
            <div class="card-body">
                <!-- Versión actual del sistema -->
                <div class="mb-3">
                    <strong>Versión:</strong> <span class="text-muted">v2.1.0</span>
                </div>
                <!-- Fecha de última actualización -->
                <div class="mb-3">
                    <strong>Última actualización:</strong> <span class="text-muted">26/05/2025</span>
                </div>
                <!-- Estado de conexión -->
                <div class="mb-3">
                    <strong>Estado del servidor:</strong> 
                    <span class="badge bg-success">Conectado</span>
                </div>
                <!-- Número de modelos disponibles -->
                <div class="mb-3">
                    <strong>Modelos disponibles:</strong> 
                    <span class="text-muted">15</span>
                </div>
            </div>
        </div>
          <!-- Panel de accesos rápidos -->
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h6 class="mb-0">
                    <i class="fas fa-clock me-2"></i>
                    Accesos Rápidos
                </h6>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <!-- Acceso a identificación de herramientas -->
                    <a href="/identificacion" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-camera me-2"></i>
                        Identificar Herramientas
                    </a>
                    <!-- Acceso a reportes (funcionalidad futura) -->
                    <a href="#" class="btn btn-outline-secondary btn-sm">
                        <i class="fas fa-chart-bar me-2"></i>
                        Ver Reportes
                    </a>                    
                    <!-- Acceso a configuración (funcionalidad futura) -->
                    <a href="#" class="btn btn-outline-info btn-sm">
                        <i class="fas fa-cog me-2"></i>
                        Configuración
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Sección de alertas y componentes del sistema -->
<div class="row mb-3" id="alertas-section">
    <!-- Panel de alertas activas -->
    <div class="col-lg-6">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Alertas del Sistema
                </h5>
            </div>
            <div class="card-body">
                <div id="alertas-container">
                    <!-- Las alertas se cargarán dinámicamente aquí -->
                    <div class="text-center">
                        <i class="fas fa-spinner fa-spin me-2"></i>
                        Cargando alertas...
                    </div>
                </div>
            </div>
        </div>
    </div>
      <!-- Panel de instrumentos -->
    <div id="instrumentos-section" class="col-lg-6">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-tools me-2"></i>
                    Instrumentos Quirúrgicos
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-6">
                        <h6 class="text-muted mb-3">Total Registrados</h6>
                        <h3 class="text-primary fw-bold" id="instrumentos-total">0</h3>
                    </div>
                    <div class="col-6">
                        <h6 class="text-muted mb-3">Categorías Principales</h6>
                        <div id="categorias-container">
                            <!-- Las categorías se cargarán dinámicamente aquí -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Sección de procedimientos y sets quirúrgicos -->
<div id="procedimientos-section" class="row mb-3">
    <!-- Panel de procedimientos -->
    <div class="col-lg-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-clipboard-list me-2"></i>
                    Procedimientos
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>Total:</span>
                        <strong id="procedimientos-total">0</strong>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>Activos:</span>
                        <strong id="procedimientos-activos" class="text-warning">0</strong>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>Completados:</span>
                        <strong id="procedimientos-completados" class="text-success">0</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
      <!-- Panel de conteos recientes -->
    <div id="conteos-section" class="col-lg-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0">
                    <i class="fas fa-camera me-2"></i>
                    Conteos Recientes
                </h5>
            </div>
            <div class="card-body">
                <div id="conteos-container">
                    <!-- Los conteos se cargarán dinámicamente aquí -->
                    <small class="text-muted">Cargando conteos recientes...</small>
                </div>
            </div>
        </div>
    </div>
      <!-- Panel de sets quirúrgicos -->
    <div id="sets-section" class="col-lg-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-box me-2"></i>
                    Sets Quirúrgicos
                </h5>
            </div>
            <div class="card-body">
                <div id="sets-container">
                    <!-- Los sets se cargarán dinámicamente aquí -->
                    <small class="text-muted">Cargando sets disponibles...</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 
   * ESTILOS CSS PERSONALIZADOS PARA EL TEMA QUIRÚRGICO
   * Variables de color del sistema médico y quirúrgico
   * Animaciones y efectos visuales
   * Responsive design para diferentes dispositivos
-->
<!-- JavaScript para funcionalidades dinámicas del dashboard -->
<script src="/static/js/dashboard.js"></script>

<!-- Enlaces a librerías externas necesarias -->
<!-- Font Awesome para iconos médicos y de interfaz -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<!-- Bootstrap JS para funcionalidades interactivas -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}